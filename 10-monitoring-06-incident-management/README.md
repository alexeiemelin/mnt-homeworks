# Домашнее задание к занятию "10.06. Инцидент-менеджмент"

## Задание 1

Составьте постмотрем, на основе реального сбоя системы Github в 2018 году.

Информация о сбое доступна [в виде краткой выжимки на русском языке](https://habr.com/ru/post/427301/) , а
также [развёрнуто на английском языке](https://github.blog/2018-10-30-oct21-post-incident-analysis/).

| Посмортем  | Описание |
| ------------- | ------------- |
| Краткое описание инцидента | В 22:52 по UTC на нескольких сервисах GitHub.com пострадали несколько сетевых разделов и последующим сбоем базы данных, что привело к появлению непоследовательной информации на нашем веб-сайте.  |
| Предшествующие события  | В 22:52 по UTC 21 октября вышло из строя оптическое оборудование на 100Gb |
| Причина инцидента | В 22:52 по UTC 21 октября вышло из строя оптическое оборудование на 100Gb, что привело к потере связи между нашим сетевым концентратором на восточном побережье США и нашим основным центром обработки данных на восточном побережье США. |
| Воздействие | Связь между побережьями была восстановлена за 43 секунды, но этот кратковременный сбой вызвал цепочку событий, которые привели к ухудшению качества обслуживания на 24 часа 11 минут. В результате появилась рассогласованность в базах данных. |
| Обнаружение  | 21 октября 22:54 UTC инцидент был замечен инженерами отвечающими за мониторинг |
| Реакция  | Было решено вручную настроить базу данных Восточного побережья США в качестве основной для каждого кластера и перестроить топологию репликации. |
| Восстановление  | Было решено восстановить базы MYSQL из резервных копий, синхронизировать реплики, вернуться к стабильной топологии обслуживания, а затем возобновить обработку заданий в очереди. |
| Таймлайн  | 21 октября 22:52 UTC - из-за потери связи между серверами, произошла рассинхронизация между БД. |
|   | 21 октября 22:54 UTC - системы мониторинга начали генерировать предупреждения |
|   | 21 октября 23:07 UTC - К этому моменту отвечающая команда решила вручную заблокировать наш внутренний инструмент развертывания, чтобы предотвратить внесение каких-либо дополнительных изменений. |
|   | 21 октября 23:13 UTC - было решено вручную настроить базу данных Восточного побережья США в качестве основной для каждого кластера и перестроить топологию репликации |
|   | 21 октября 23:19 UTC - Из запроса состояния кластеров базы данных стало ясно, что нужно остановить выполнение заданий, записывающих метаданные о таких вещах, как push-уведомления. |
|   | 22 октября 00:05 UTC - Инженеры, участвующие в группе реагирования на инциденты, начали разработку плана по устранению несоответствий данных и внедрению процедур аварийного переключения для MySQL |
|   | 22 октября 00:41 UTC - К этому времени был инициирован процесс резервного копирования для всех затронутых кластеров MySQL |
|   | 22 октября 06:51 UTC - Несколько кластеров завершили восстановление из резервных копий в центре обработки данных на восточном побережье США и начали репликацию новых данных с западного побережья |
|   | 22 октября 07:46 UTC - Github опубликовал официальное сообщение, чтобы держать пользователей в курсе. |
|   | 22 октября 11:12 UTC - Все первичные базы данных снова установлены на восточном побережье США |
|   | 22 октября 13:15 UTC - Github.com приближался к пиковой нагрузке. Команда начала предоставлять дополнительные реплики чтения MySQL в общедоступном облаке восточного побережья США ранее во время инцидента. Именно сокращение реплик повлияло на снижение нагрузки. |
|   | 22 октября 16:24 UTC - Как только реплики были синхронизированы, было выполнено аварийное переключение на исходную топологию. Это решило проблемы с задержкой/доступностью. |
|   | 22 октября 16:45 UTC - увеличили время TTL, т.к. при включении уведомлений росла нагрузка на систему. |
|   | 22 октября 23:03 UTC - вся поступившая ранее информация была обработана и статус сайта был переведен в штатный режим.  |
| Последующие действия  | Была произведена работа с логам, чтобы определить какие записи были не синхронизированны и требуют от пользователей дальнейших действий. |
|   | Принято решение информировать пользователей более точной информацией в будущем. |
|   | Принято решение перенастроить оркестратор, чтобы в будущем исключить проблемы с синхронизацией при задержке обмена данными между региональными серверами. |
|   | Расширили функции мониторинга для более точного понимания состояния сервисов. |
|   | Изменен режим работы ЦОДов для исключения ошибок при отказе одного из них.  |
|   | Мы будем более пристально следить за развитием инфраструктуры и обращать внимание на различные инциативы по ее оптимизации. |



## Задача повышенной сложности

Прослушайте [симуляцию аудиозаписи о инциденте](https://youtu.be/vw6I5DYWkNA?t=1), предоставленную 
разработчиками инструмента для автоматизации инцидент-менеджмента PagerDuty.

На основании этой аудиозаписи попробуйте составить сообщения для пользователей о данном инциденте.

Должно быть 3 сообщения о:
- начале инцидента
- продолжающихся работах
- окончании инцидента и возвращении к штатной работе

---

### Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---
